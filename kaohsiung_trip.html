<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ì˜¤ìŠ 3ë°• 4ì¼ ì—¬í–‰ ê³„íš</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            color: white;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .trip-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .trip-info-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Map Section */
        .map-section {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        #map {
            height: 500px;
            width: 100%;
        }

        .map-legend {
            padding: 15px;
            background: #f8f9fa;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.attraction { background: #667eea; }
        .legend-dot.food { background: #f59e0b; }
        .legend-dot.night { background: #ec4899; }
        .legend-dot.airport { background: #10b981; }
        .legend-dot.hotel { background: #3b82f6; }

        /* Schedule Section */
        .schedule-section {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        /* Day Tabs */
        .day-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }

        .day-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .day-tab:hover {
            background: #e9ecef;
        }

        .day-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        /* Timeline */
        .timeline-container {
            padding: 20px;
            max-height: 450px;
            overflow-y: auto;
        }

        .day-content {
            display: none;
        }

        .day-content.active {
            display: block;
        }

        .timeline-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid #667eea;
        }

        .timeline-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .timeline-item.food {
            border-left-color: #f59e0b;
        }

        .timeline-item.night {
            border-left-color: #ec4899;
        }

        .timeline-item.airport {
            border-left-color: #10b981;
            background: linear-gradient(90deg, #d1fae5 0%, #f8f9fa 100%);
        }

        .timeline-time {
            min-width: 60px;
            font-weight: 700;
            color: #667eea;
        }

        .timeline-item.food .timeline-time {
            color: #f59e0b;
        }

        .timeline-item.night .timeline-time {
            color: #ec4899;
        }

        .timeline-item.airport .timeline-time {
            color: #10b981;
        }

        /* Transport Transition */
        .timeline-transport {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            margin: 5px 0 5px 30px;
            background: linear-gradient(90deg, #e0f2fe 0%, #f0f9ff 100%);
            border-radius: 20px;
            font-size: 0.8rem;
            color: #0369a1;
            border-left: 3px solid #0ea5e9;
        }

        .timeline-transport i {
            font-size: 1rem;
        }

        .timeline-transport .transport-detail {
            flex: 1;
        }

        .timeline-transport .transport-time {
            font-weight: 600;
            color: #0ea5e9;
            white-space: nowrap;
        }

        .timeline-content h4 {
            font-size: 1rem;
            margin-bottom: 5px;
            color: #333;
        }

        .timeline-content p {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.5;
        }

        .timeline-content .tag {
            display: inline-block;
            padding: 2px 8px;
            background: #667eea20;
            color: #667eea;
            border-radius: 10px;
            font-size: 0.75rem;
            margin-top: 8px;
        }

        .timeline-content .tag.food {
            background: #f59e0b20;
            color: #f59e0b;
        }

        /* Restaurant Cards */
        .restaurant-section {
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .restaurant-section h2 {
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .restaurant-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }

        .restaurant-card {
            background: linear-gradient(135deg, #fff5e6 0%, #fff 100%);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #f59e0b30;
            transition: all 0.3s;
        }

        .restaurant-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2);
        }

        .restaurant-card h4 {
            color: #f59e0b;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .restaurant-card .cuisine {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 10px;
        }

        .restaurant-card .menu {
            font-size: 0.9rem;
            color: #333;
        }

        .restaurant-card .tip {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #888;
            font-style: italic;
        }

        .restaurant-card .map-link {
            display: inline-block;
            margin-top: 12px;
            padding: 6px 12px;
            background: #4285f4;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .restaurant-card .map-link:active {
            background: #3367d6;
        }

        /* Custom Marker */
        .custom-marker {
            background: #667eea;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 3px solid white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .custom-marker.food {
            background: #f59e0b;
        }

        .custom-marker.night {
            background: #ec4899;
        }

        .custom-marker.hotel {
            background: #3b82f6;
        }

        /* Popup Styling */
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
        }

        .popup-content h3 {
            color: #667eea;
            margin-bottom: 8px;
        }

        .popup-content.food h3 {
            color: #f59e0b;
        }

        .popup-content p {
            margin: 5px 0;
            font-size: 0.9rem;
        }

        /* Transportation Section */
        .transport-section {
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .transport-section h2 {
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .transport-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .transport-card {
            background: linear-gradient(135deg, #e0f2fe 0%, #fff 100%);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #0ea5e930;
            transition: all 0.3s;
        }

        .transport-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.2);
        }

        .transport-card.recommended {
            background: linear-gradient(135deg, #dcfce7 0%, #fff 100%);
            border: 2px solid #22c55e;
            position: relative;
        }

        .transport-card.recommended::before {
            content: "â­ ì¶”ì²œ";
            position: absolute;
            top: -10px;
            right: 15px;
            background: #22c55e;
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .transport-card h4 {
            color: #0ea5e9;
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .transport-card.recommended h4 {
            color: #22c55e;
        }

        .transport-card .price {
            font-size: 0.85rem;
            color: #f59e0b;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .transport-card .desc {
            font-size: 0.9rem;
            color: #555;
            line-height: 1.5;
        }

        .transport-card .routes {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #666;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
        }

        .transport-card .tip {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #888;
            font-style: italic;
        }

        .transport-badge {
            display: inline-block;
            padding: 2px 8px;
            background: #0ea5e920;
            color: #0ea5e9;
            border-radius: 10px;
            font-size: 0.75rem;
            margin-right: 5px;
        }

        /* Route Info */
        .route-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .route-section h3 {
            font-size: 1rem;
            color: #333;
            margin-bottom: 15px;
        }

        .route-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .route-from-to {
            flex: 1;
            font-size: 0.9rem;
        }

        .route-method {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #0ea5e9;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .route-time {
            color: #666;
            font-size: 0.85rem;
        }

        /* Packing List */
        .packing-section {
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .packing-section h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .packing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .packing-category h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .packing-category ul {
            list-style: none;
        }

        .packing-category li {
            padding: 8px 0;
            font-size: 0.9rem;
            color: #555;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .packing-category li:hover {
            color: #667eea;
        }

        .packing-category li input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
            cursor: pointer;
        }

        .packing-category li.checked {
            color: #aaa;
            text-decoration: line-through;
        }

        .packing-category li.checked label {
            color: #aaa;
        }

        .packing-category label {
            cursor: pointer;
            flex: 1;
        }

        /* Budget Summary */
        .budget-summary {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .budget-summary h3 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 1.1rem;
        }

        .budget-table {
            width: 100%;
            border-collapse: collapse;
        }

        .budget-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #eee;
        }

        .budget-table td:first-child {
            color: #555;
        }

        .budget-table td:last-child {
            text-align: right;
            font-weight: 500;
            color: #333;
        }

        .budget-table tr.total td {
            border-top: 2px solid #667eea;
            border-bottom: none;
            padding-top: 12px;
            color: #667eea;
        }

        .budget-note {
            margin: 12px 0 0 0;
            font-size: 0.85rem;
            color: #888;
            text-align: center;
        }

        /* Plan B Page */
        .planb-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .planb-header h2 {
            margin: 0 0 8px 0;
            color: #333;
        }

        .planb-header p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .location-status {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .location-btn {
            background: #4285f4;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .location-btn:active {
            background: #3367d6;
        }

        .location-btn.loading {
            opacity: 0.7;
        }

        #location-text {
            font-size: 0.85rem;
            color: #666;
        }

        #location-text.success {
            color: #10b981;
        }

        .planb-select-wrapper {
            margin-bottom: 15px;
        }

        .planb-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            color: #333;
        }

        .planb-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .planb-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .planb-card.original {
            border: 2px solid #667eea;
            background: #f5f3ff;
        }

        .planb-card-info {
            flex: 1;
        }

        .planb-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .planb-card.original .planb-name {
            color: #667eea;
        }

        .planb-desc {
            font-size: 0.85rem;
            color: #666;
        }

        .planb-card-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .planb-distance {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            min-width: 60px;
            text-align: right;
        }

        .planb-distance.unknown {
            color: #aaa;
            font-size: 0.8rem;
        }

        .planb-map-btn {
            background: #4285f4;
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        /* Scrollbar */
        .timeline-container::-webkit-scrollbar {
            width: 6px;
        }

        .timeline-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .timeline-container::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 3px;
        }

        /* ==================== */
        /* Bottom Navigation */
        /* ==================== */
        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.15);
            z-index: 1000;
            padding: 8px 0;
            padding-bottom: max(8px, env(safe-area-inset-bottom));
        }

        .bottom-nav .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            color: #888;
            font-size: 0.7rem;
            transition: all 0.2s;
            border-radius: 12px;
        }

        .nav-item .nav-icon {
            font-size: 1.3rem;
        }

        .nav-item.active {
            color: #667eea;
            background: #667eea15;
        }

        .nav-item:hover {
            color: #667eea;
        }

        /* Page System */
        .page {
            display: block;
        }

        /* Budget Section */
        .budget-section {
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .budget-section h2 {
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .budget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .budget-toggle {
            display: flex;
            gap: 5px;
        }

        .budget-toggle button {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .budget-toggle button.active {
            background: #667eea;
            color: white;
        }

        .budget-total {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 25px;
        }

        .budget-total .total-amount {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .budget-total .total-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        .budget-total .exchange-rate {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 10px;
        }

        .budget-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }

        .budget-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            transition: all 0.2s;
        }

        .budget-item:hover {
            background: #f0f0f0;
        }

        .budget-item .item-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        .budget-item .item-info {
            flex: 1;
        }

        .budget-item .item-name {
            font-weight: 600;
            color: #333;
        }

        .budget-item .item-note {
            font-size: 0.8rem;
            color: #888;
        }

        .budget-item .item-amount {
            text-align: right;
        }

        .budget-item .item-krw {
            font-weight: 700;
            color: #667eea;
        }

        .budget-item .item-ntd {
            font-size: 0.8rem;
            color: #888;
        }

        .budget-item .item-bar {
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }

        .budget-item .item-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        /* ==================== */
        /* Mobile Styles */
        /* ==================== */
        @media (max-width: 768px) {
            /* Show bottom nav */
            .bottom-nav {
                display: block;
            }

            .container {
                padding-bottom: 90px;
            }

            /* Header */
            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .header p {
                font-size: 1rem;
            }

            .trip-info {
                gap: 8px;
            }

            .trip-info-item {
                padding: 6px 12px;
                font-size: 0.75rem;
            }

            /* Flight cards - stack vertically */
            .header > div:last-child {
                flex-direction: column;
                gap: 10px;
            }

            .header > div:last-child > div {
                width: 100%;
            }

            /* Map */
            #map {
                height: 280px;
            }

            .map-legend {
                padding: 10px;
                gap: 12px;
            }

            .legend-item {
                font-size: 0.8rem;
            }

            /* Main content */
            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            /* Schedule */
            .day-tab {
                padding: 10px 5px;
                font-size: 0.85rem;
            }

            .day-tab small {
                font-size: 0.65rem;
            }

            .timeline-container {
                max-height: none;
                padding: 15px;
            }

            .timeline-item {
                padding: 12px;
                gap: 10px;
            }

            .timeline-time {
                min-width: 50px;
                font-size: 0.9rem;
            }

            .timeline-content h4 {
                font-size: 0.95rem;
            }

            .timeline-content p {
                font-size: 0.8rem;
            }

            .timeline-transport {
                margin-left: 20px;
                padding: 6px 12px;
                font-size: 0.75rem;
            }

            /* Restaurant */
            .restaurant-section {
                padding: 20px 15px;
            }

            .restaurant-section h2 {
                font-size: 1.1rem;
            }

            .restaurant-grid {
                grid-template-columns: 1fr;
            }

            /* Transport */
            .transport-section {
                padding: 20px 15px;
            }

            .transport-grid {
                grid-template-columns: 1fr;
            }

            .route-item {
                flex-direction: column;
                gap: 8px;
                align-items: flex-start;
            }

            /* Budget */
            .budget-section {
                padding: 20px 15px;
            }

            .budget-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .budget-total .total-amount {
                font-size: 2rem;
            }

            .budget-items {
                grid-template-columns: 1fr;
            }

            /* Packing */
            .packing-section {
                padding: 20px 15px;
            }

            .packing-grid {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
            }

            .packing-category h4 {
                font-size: 0.85rem;
            }

            .packing-category li {
                font-size: 0.8rem;
                padding: 6px 0;
            }

            /* Page system for mobile */
            .page {
                display: none;
            }

            .page.active {
                display: block;
            }

            /* Schedule page: map + timeline stacked */
            #page-schedule .map-section {
                border-radius: 12px;
                margin-bottom: 15px;
            }

            #page-schedule #map {
                height: 25vh;
                min-height: 150px;
            }

            #page-schedule .schedule-section {
                border-radius: 12px;
            }

            #page-schedule .timeline-container {
                max-height: 45vh;
            }

            /* Mini header for non-home pages */
            .page-title {
                display: none;
            }

            .page:not(#page-home) .page-title {
                display: block;
                background: white;
                color: #333;
                padding: 15px 20px;
                margin: -20px -15px 15px -15px;
                border-radius: 0 0 16px 16px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }

            .page-title h3 {
                font-size: 1.1rem;
                margin: 0;
                font-weight: 700;
            }

            /* Food page tabs */
            .food-tabs {
                display: flex;
                gap: 10px;
                margin-bottom: 15px;
                background: #f1f5f9;
                padding: 5px;
                border-radius: 12px;
            }

            .food-tab {
                flex: 1;
                padding: 12px 16px;
                border: none;
                background: transparent;
                border-radius: 10px;
                font-size: 0.95rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s;
                color: #64748b;
            }

            .food-tab.active {
                background: white;
                color: #334155;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }

            .food-tab-content {
                display: none;
            }

            .food-tab-content.active {
                display: block;
            }
        }

        /* Desktop: show all tab content, hide tabs */
        @media (min-width: 769px) {
            .food-tabs {
                display: none;
            }
            .food-tab-content {
                display: block !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Home Page: Header + Flight Info -->
        <div class="page active" id="page-home">
        <div class="header">
            <h1>ğŸ‡¹ğŸ‡¼ ê°€ì˜¤ìŠ 3ë°• 4ì¼</h1>
            <p>ì—¬ìœ ë¡œìš´ ëŒ€ë§Œ ë‚¨ë¶€ íë§ ì—¬í–‰</p>
            <div class="trip-info">
                <div class="trip-info-item">
                    <i class="fas fa-calendar"></i> 2026.3.13(ê¸ˆ) ~ 3.16(ì›”)
                </div>
                <div class="trip-info-item">
                    <i class="fas fa-thermometer-half"></i> 23-28Â°C
                </div>
            </div>

            <!-- Flight Info Cards -->
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px; flex-wrap: wrap;">
                <div style="background: rgba(255,255,255,0.95); padding: 15px 25px; border-radius: 12px; color: #333; text-align: left;">
                    <div style="font-weight: 700; color: #667eea; margin-bottom: 8px;"><i class="fas fa-plane-departure"></i> ê°€ëŠ”í¸ Â· 3ì›” 13ì¼ (ê¸ˆ)</div>
                    <div style="font-size: 1.1rem; font-weight: 600;">ğŸ›« 10:50 ê¹€í¬(GMP) â†’ 13:05 ê°€ì˜¤ìŠ(KHH)</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">í‹°ì›¨ì´í•­ê³µ TW651 Â· ì§í•­ 3ì‹œê°„ 15ë¶„</div>
                </div>
                <div style="background: rgba(255,255,255,0.95); padding: 15px 25px; border-radius: 12px; color: #333; text-align: left;">
                    <div style="font-weight: 700; color: #ec4899; margin-bottom: 8px;"><i class="fas fa-plane-arrival"></i> ì˜¤ëŠ”í¸ Â· 3ì›” 16ì¼ (ì›”)</div>
                    <div style="font-size: 1.1rem; font-weight: 600;">ğŸ›¬ 14:05 ê°€ì˜¤ìŠ(KHH) â†’ 17:55 ê¹€í¬(GMP)</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">í‹°ì›¨ì´í•­ê³µ TW652 Â· ì§í•­ 2ì‹œê°„ 50ë¶„</div>
                </div>
            </div>
        </div>
        </div><!-- End page-home -->

        <!-- Schedule Page: Map + Timeline -->
        <div class="page" id="page-schedule">
            <!-- Map Section -->
            <div class="map-section">
                <div id="map"></div>
                <div class="map-legend">
                    <div class="legend-item">
                        <div class="legend-dot airport"></div>
                        <span>ê³µí•­</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot attraction"></div>
                        <span>ê´€ê´‘ì§€</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot food"></div>
                        <span>ë§›ì§‘</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot night"></div>
                        <span>ì•¼ì‹œì¥/ì•¼ê²½</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot hotel"></div>
                        <span>ìˆ™ì†Œ</span>
                    </div>
                </div>
            </div>

            <!-- Schedule Section -->
            <div class="schedule-section">
                <div class="day-tabs">
                    <button class="day-tab active" data-day="1">Day 1<br><small>3/13(ê¸ˆ) ë„ì°©</small></button>
                    <button class="day-tab" data-day="2">Day 2<br><small>3/14(í† ) í˜¸ìˆ˜</small></button>
                    <button class="day-tab" data-day="3">Day 3<br><small>3/15(ì¼) ì¹˜ì§„ì„¬</small></button>
                    <button class="day-tab" data-day="4">Day 4<br><small>3/16(ì›”) ì¶œë°œ</small></button>
                </div>

                <div class="timeline-container">
                    <!-- Day 1 - 3ì›” 13ì¼ (ê¸ˆ) -->
                    <div class="day-content active" data-day="1">
                        <div class="timeline-item airport" data-lat="22.5726" data-lng="120.3390">
                            <div class="timeline-time">13:05</div>
                            <div class="timeline-content">
                                <h4>âœˆï¸ ê°€ì˜¤ìŠ êµ­ì œê³µí•­ ë„ì°©</h4>
                                <p>TW651 ê¹€í¬â†’ê°€ì˜¤ìŠ ë„ì°©<br>ì…êµ­ ì‹¬ì‚¬ & ìˆ˜í•˜ë¬¼ ìˆ˜ë ¹ (ì•½ 30ë¶„)</p>
                                <span class="tag">ë„ì°©</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-train"></i>
                            <div class="transport-detail">MRT ë ˆë“œë¼ì¸ â†’ ë©”ì´ë¦¬ë‹¤ì˜¤ì—­(ç¾éº—å³¶ç«™)</div>
                            <div class="transport-time">ğŸ• 25ë¶„ Â· NT$60</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6273" data-lng="120.3014">
                            <div class="timeline-time">14:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ¨ í˜¸í…” ì²´í¬ì¸</h4>
                                <p>MRT ë©”ì´ë¦¬ë‹¤ì˜¤ì—­(ç¾éº—å³¶ç«™) ê·¼ì²˜ ì¶”ì²œ<br>ì§ ë§¡ê¸°ê³  ê°€ë³ê²Œ ì¶œë°œ!</p>
                                <span class="tag">íœ´ì‹</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ ì´ë™</div>
                            <div class="transport-time">ğŸ• 10ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6320" data-lng="120.2940">
                            <div class="timeline-time">15:00</div>
                            <div class="timeline-content">
                                <h4>ğŸœ èˆˆéš†å±… (ì‹±ë¡±ì¥)</h4>
                                <p>ì „í†µ ë”¤ì„¬ & ì°ë¹µìœ¼ë¡œ ëŠ¦ì€ ì ì‹¬<br>ì¶”ì²œ: ìƒ¤ì˜¤ë¡±ë°”ì˜¤, ë‹¨ë¹™(ë‹¬ê±€ë¹™)</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ë¡œ í˜¸í…” ë³µê·€</div>
                            <div class="transport-time">ğŸ• 10ë¶„</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6273" data-lng="120.3014">
                            <div class="timeline-time">16:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ˜´ í˜¸í…” íœ´ì‹</h4>
                                <p>ì²«ë‚ ì€ ë¬´ë¦¬í•˜ì§€ ì•Šê¸°! ë‚®ì  ë˜ëŠ” í˜¸í…” ì£¼ë³€ ì‚°ì±…</p>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ ì´ë™ (ì˜Œì²­êµ¬/é¹½åŸ•å€ ë°©í–¥)</div>
                            <div class="transport-time">ğŸ• 15ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6145" data-lng="120.2986">
                            <div class="timeline-time">18:00</div>
                            <div class="timeline-content">
                                <h4>ğŸ§‹ è€æ±Ÿç´…èŒ¶ç‰›å¥¶ (ë¼ì˜¤ì¥)</h4>
                                <p>ê°€ì˜¤ìŠ ëª…ë¬¼ ë°€í¬í‹°! 1949ë…„ë¶€í„° ì˜ì—…<br>ì¶”ì²œ: í™ì°¨ìš°ìœ , í† ìŠ¤íŠ¸</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ë¡œ ë¥˜í—ˆì•¼ì‹œì¥</div>
                            <div class="transport-time">ğŸ• 5ë¶„</div>
                        </div>
                        <div class="timeline-item night" data-lat="22.6108" data-lng="120.2983">
                            <div class="timeline-time">19:00</div>
                            <div class="timeline-content">
                                <h4>ğŸŒ™ å…­åˆå¤œå¸‚ (ë¥˜í—ˆì•¼ì‹œì¥)</h4>
                                <p>ê°€ë³ê²Œ ì•¼ì‹œì¥ êµ¬ê²½ & ì €ë…<br>ì¶”ì²œ: íŒŒíŒŒì•¼ìš°ìœ , í•´ì‚°ë¬¼ê¼¬ì¹˜, ê´€ì°¨ì´ë°˜</p>
                                <span class="tag food">ì•¼ì‹œì¥</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ë¡œ í˜¸í…” ë³µê·€</div>
                            <div class="transport-time">ğŸ• 10ë¶„</div>
                        </div>
                    </div>

                    <!-- Day 2 - 3ì›” 14ì¼ (í† ) -->
                    <div class="day-content" data-day="2">
                        <div class="timeline-item food" data-lat="22.6352" data-lng="120.2865">
                            <div class="timeline-time">09:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ¥Ÿ æ¥Šå¯¶å¯¶è’¸é¤ƒ (ì–‘ë°”ì˜¤ë°”ì˜¤)</h4>
                                <p>í˜„ì§€ì¸ ì°ë§›ì§‘! ì•„ì¹¨ë¶€í„° ì¤„ ì„œëŠ” ê³³<br>ì¶”ì²œ: ì°ë§Œë‘ 10ê°œ + ì™„íƒ•íƒ•</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-train"></i>
                            <div class="transport-detail">MRT ë ˆë“œâ†’ì˜¤ë Œì§€ í™˜ìŠ¹ ë©”ì´ë¦¬ë‹¤ì˜¤ì—­(ç¾éº—å³¶ç«™)</div>
                            <div class="transport-time">ğŸ• 20ë¶„ Â· NT$35</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6469" data-lng="120.2928">
                            <div class="timeline-time">11:00</div>
                            <div class="timeline-content">
                                <h4>ğŸ‰ è“®æ± æ½­ (ë¡„ì¸ íƒ„/ì—°ì§€ë‹´)</h4>
                                <p>ìš©í˜¸íƒ‘, ì¶˜ì¶”ê° êµ¬ê²½ + í˜¸ìˆ˜ ì‚°ì±…<br>ì—¬ìœ ë¡­ê²Œ 2-3ì‹œê°„ ë‘˜ëŸ¬ë³´ê¸°</p>
                                <span class="tag">ê´€ê´‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">í˜¸ìˆ˜ ì£¼ë³€ ë„ë³´</div>
                            <div class="transport-time">ğŸ• 5ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6480" data-lng="120.2950">
                            <div class="timeline-time">13:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ² ì—°ì§€ë‹´ ê·¼ì²˜ í˜„ì§€ì‹ë‹¹</h4>
                                <p>ìš°ì–´íƒ•(ìƒì„ ë¬µêµ­), ë¯¸í€(ìŒ€êµ­ìˆ˜) ì ì‹¬</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-train"></i>
                            <div class="transport-detail">MRT ì˜¤ë Œì§€â†’ë ˆë“œ í™˜ìŠ¹ â†’ ë©”ì´ë¦¬ë‹¤ì˜¤ì—­(ç¾éº—å³¶ç«™)</div>
                            <div class="transport-time">ğŸ• 25ë¶„ Â· NT$35</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6273" data-lng="120.3014">
                            <div class="timeline-time">15:00</div>
                            <div class="timeline-content">
                                <h4>â˜• í˜¸í…” ë³µê·€ & íœ´ì‹</h4>
                                <p>ë‚®ì  or ì¹´í˜ì—ì„œ ì—¬ìœ ë¡­ê²Œ</p>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-tram"></i>
                            <div class="transport-detail">ê²½ì „ì² (è¼•è»Œ) â†’ ë‹¤í‘ì—­(å¤§å…¬ç«™)</div>
                            <div class="transport-time">ğŸ• 15ë¶„ Â· NT$30</div>
                        </div>
                        <div class="timeline-item night" data-lat="22.6120" data-lng="120.2860">
                            <div class="timeline-time">18:00</div>
                            <div class="timeline-content">
                                <h4>ğŸŒ† é§äºŒè—è¡“ç‰¹å€ (ë³´ì–¼ì˜ˆìˆ íŠ¹êµ¬)</h4>
                                <p>ì˜› ì°½ê³ ë¥¼ ê°œì¡°í•œ ì˜ˆìˆ  ë‹¨ì§€, ë²½í™” ê±°ë¦¬<br>ì„ì–‘ ì‹œê°„ì— ë°©ë¬¸ ì¶”ì²œ</p>
                                <span class="tag">ê´€ê´‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-tram"></i>
                            <div class="transport-detail">ê²½ì „ì² (è¼•è»Œ) â†’ ì¤‘ì•™ê³µì›ì—­(ä¸­å¤®å…¬åœ’ç«™)</div>
                            <div class="transport-time">ğŸ• 10ë¶„ Â· NT$30</div>
                        </div>
                        <div class="timeline-item night" data-lat="22.6137" data-lng="120.2875">
                            <div class="timeline-time">19:30</div>
                            <div class="timeline-content">
                                <h4>âœ¨ í¬ë¥´ëª¨ì‚¬ ëŒ€ë¡œ(å…‰ä¹‹ç©¹é ‚) ì•¼ê²½</h4>
                                <p>ì¤‘ì•™ê³µì›ì—­(ä¸­å¤®å…¬åœ’ç«™)~ë©”ì´ë¦¬ë‹¤ì˜¤ì—­(ç¾éº—å³¶ç«™) ì•¼ê²½ ì‚°ì±…<br>ì„¸ê³„ì—ì„œ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ì§€í•˜ì² ì—­!</p>
                                <span class="tag">ì•¼ê²½</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ (ì˜Œì²­êµ¬/é¹½åŸ•å€ ë°©í–¥)</div>
                            <div class="transport-time">ğŸ• 10ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6100" data-lng="120.2980">
                            <div class="timeline-time">20:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ¦ é¹½åŸ•å€(ì˜Œì²­êµ¬) í•´ì‚°ë¬¼ ì‹ë‹¹</h4>
                                <p>ì‹±ì‹±í•œ í•´ì‚°ë¬¼ë¡œ ì €ë… ì‹ì‚¬<br>ìƒˆìš°ë³¶ìŒë°¥, ì¡°ê°œíƒ• ì¶”ì²œ</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ë¡œ í˜¸í…” ë³µê·€</div>
                            <div class="transport-time">ğŸ• 15ë¶„</div>
                        </div>
                    </div>

                    <!-- Day 3 - 3ì›” 15ì¼ (ì¼) -->
                    <div class="day-content" data-day="3">
                        <div class="timeline-item food" data-lat="22.6200" data-lng="120.2850">
                            <div class="timeline-time">09:00</div>
                            <div class="timeline-content">
                                <h4>ğŸ¦† é´¨è‚‰ç (ì•¼ë¡œìš°ì  )</h4>
                                <p>ì˜¤ë¦¬ê³ ê¸° êµ­ìˆ˜/ë®ë°¥ ì•„ì¹¨<br>50ë…„ ì „í†µ í˜„ì§€ì¸ ë§›ì§‘</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-train"></i>
                            <div class="transport-detail">MRT ë ˆë“œë¼ì¸ â†’ êµ¬ì‚°ì—­(é¼“å±±ç«™) 1ë²ˆì¶œêµ¬</div>
                            <div class="transport-time">ğŸ• 15ë¶„ Â· NT$30</div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-ship"></i>
                            <div class="transport-detail">êµ¬ì‚° í˜ë¦¬í„°ë¯¸ë„(é¼“å±±è¼ªæ¸¡ç«™) â†’ ì¹˜ì§„ì„¬(æ——æ´¥)</div>
                            <div class="transport-time">ğŸ• 10ë¶„ Â· NT$40</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6145" data-lng="120.2650">
                            <div class="timeline-time">10:30</div>
                            <div class="timeline-content">
                                <h4>â›´ï¸ ì¹˜ì§„ì„¬ ë„ì°©!</h4>
                                <p>í˜ë¦¬í„°ë¯¸ë„ì—ì„œ YouBike ëŒ€ì—¬ ì¶”ì²œ</p>
                                <span class="tag">ê´€ê´‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-bicycle"></i>
                            <div class="transport-detail">YouBikeë¡œ ì„¬ ì¼ì£¼</div>
                            <div class="transport-time">ğŸ• ììœ  Â· NT$10/30ë¶„</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6120" data-lng="120.2630">
                            <div class="timeline-time">11:00</div>
                            <div class="timeline-content">
                                <h4>ğŸï¸ ì¹˜ì§„ì„¬ ì‚°ì±…</h4>
                                <p>ë“±ëŒ€, í•´ë³€, ì²œí›„ê¶ ì—¬ìœ ë¡­ê²Œ êµ¬ê²½</p>
                                <span class="tag">ê´€ê´‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-bicycle"></i>
                            <div class="transport-detail">ìì „ê±°ë¡œ í•´ì‚°ë¬¼ ê±°ë¦¬ ì´ë™</div>
                            <div class="transport-time">ğŸ• 5ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6130" data-lng="120.2640">
                            <div class="timeline-time">12:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ¦ ì¹˜ì§„ í•´ì‚°ë¬¼ ê±°ë¦¬</h4>
                                <p>ì‹±ì‹±í•œ í•´ì‚°ë¬¼ ì ì‹¬! ê°€ê²© í¥ì • í•„ìˆ˜<br>ìƒˆìš°, ì¡°ê°œ, ìƒì„ êµ¬ì´ ì¶”ì²œ</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-bicycle"></i>
                            <div class="transport-detail">í•´ë³€ ë°©í–¥ìœ¼ë¡œ ì´ë™</div>
                            <div class="transport-time">ğŸ• 5ë¶„</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6200" data-lng="120.2600">
                            <div class="timeline-time">14:30</div>
                            <div class="timeline-content">
                                <h4>ğŸŒŠ ì¹˜ì§„ í•´ë³€ ì‚°ì±…</h4>
                                <p>ë°”ë‹¤ ë³´ë©° ì—¬ìœ ë¡­ê²Œ ì»¤í”¼ í•œ ì”</p>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-ship"></i>
                            <div class="transport-detail">í˜ë¦¬ë¡œ êµ¬ì‚°(é¼“å±±) ë³µê·€ â†’ ë„ë³´ë¡œ ì‹œì¦ˆì™„(è¥¿å­ç£)</div>
                            <div class="transport-time">ğŸ• 20ë¶„ Â· NT$40</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6245" data-lng="120.2656">
                            <div class="timeline-time">16:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ›ï¸ è¥¿å­ç£ (ì‹œì¦ˆì™„)</h4>
                                <p>ì˜êµ­ ì˜ì‚¬ê´€(æ‰“ç‹—è‹±åœ‹é ˜äº‹é¤¨) ìœ ì , ì–¸ë•ì—ì„œ ì„ì–‘ ë³´ê¸°<br>ê°€ì˜¤ìŠ ìµœê³ ì˜ ì„ì–‘ ëª…ì†Œ!</p>
                                <span class="tag">ê´€ê´‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-taxi"></i>
                            <div class="transport-detail">íƒì‹œ or Uber â†’ ë£¨ì´í‘ì•¼ì‹œì¥(ç‘è±å¤œå¸‚)</div>
                            <div class="transport-time">ğŸ• 20ë¶„ Â· NT$200</div>
                        </div>
                        <div class="timeline-item night" data-lat="22.6700" data-lng="120.2860">
                            <div class="timeline-time">19:00</div>
                            <div class="timeline-content">
                                <h4>ğŸª ç‘è±å¤œå¸‚ (ë£¨ì´í‘ì•¼ì‹œì¥)</h4>
                                <p>í˜„ì§€ì¸ì´ ë” ë§ì´ ê°€ëŠ” ì•¼ì‹œì¥!<br>ë¥˜í—ˆ(å…­åˆ)ë³´ë‹¤ ì €ë ´í•˜ê³  ë‹¤ì–‘í•¨</p>
                                <span class="tag food">ì•¼ì‹œì¥</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ì•¼ì‹œì¥ ë‚´ ë„ë³´</div>
                            <div class="transport-time">ğŸ• 5ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6700" data-lng="120.2860">
                            <div class="timeline-time">20:00</div>
                            <div class="timeline-content">
                                <h4>ğŸ§ ë¹™ê³¼ì  ë§ê³ ë¹™ìˆ˜</h4>
                                <p>ëŒ€ë§Œ ë‚¨ë¶€ ë§ê³ ëŠ” ì§„ì§œ ë‹¤ë¦„!<br>ë§ˆë¬´ë¦¬ ë””ì €íŠ¸ë¡œ ë”±</p>
                                <span class="tag food">ë””ì €íŠ¸</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-taxi"></i>
                            <div class="transport-detail">íƒì‹œë¡œ í˜¸í…” ë³µê·€</div>
                            <div class="transport-time">ğŸ• 15ë¶„ Â· NT$150</div>
                        </div>
                    </div>

                    <!-- Day 4 - 3ì›” 16ì¼ (ì›”) -->
                    <div class="day-content" data-day="4">
                        <div class="timeline-item food" data-lat="22.6320" data-lng="120.2940">
                            <div class="timeline-time">08:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ¥ í˜¸í…” ì¡°ì‹ or ê·¼ì²˜ ë¸ŒëŸ°ì¹˜</h4>
                                <p>ì—¬ìœ ë¡­ê²Œ ë§ˆì§€ë§‰ ì•„ì¹¨</p>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ë¡œ ì‡¼í•‘ ê±°ë¦¬</div>
                            <div class="transport-time">ğŸ• 10ë¶„</div>
                        </div>
                        <div class="timeline-item" data-lat="22.6273" data-lng="120.3014">
                            <div class="timeline-time">09:30</div>
                            <div class="timeline-content">
                                <h4>ğŸ›ï¸ ë§ˆì§€ë§‰ ì‡¼í•‘</h4>
                                <p>ì‹ ì¿ ì¥(æ–°å €æ±Ÿ) ìƒê¶Œ or í•œì‹ ë°±í™”ì <br>í‘ë¦¬ìˆ˜, ëˆ„ê°€í¬ë˜ì»¤ ì„ ë¬¼ êµ¬ë§¤</p>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">ë„ë³´ ì´ë™</div>
                            <div class="transport-time">ğŸ• 5ë¶„</div>
                        </div>
                        <div class="timeline-item food" data-lat="22.6150" data-lng="120.2980">
                            <div class="timeline-time">10:30</div>
                            <div class="timeline-content">
                                <h4>ğŸœ ë‹¨ì§œì´ë¯¸ì—” (æ“”ä»”éºµ)</h4>
                                <p>ê°€ì˜¤ìŠ ë§ˆì§€ë§‰ ì‹ì‚¬ëŠ” ë‹´ë°±í•œ êµ­ìˆ˜ë¡œ<br>åº¦å°æœˆ(ë‘ìƒ¤ì˜¤ì›¨) ì¶”ì²œ</p>
                                <span class="tag food">ë§›ì§‘</span>
                            </div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-walking"></i>
                            <div class="transport-detail">í˜¸í…” ë³µê·€ â†’ ì²´í¬ì•„ì›ƒ & ì§ ì±™ê¸°ê¸°</div>
                            <div class="transport-time">ğŸ• 30ë¶„</div>
                        </div>
                        <div class="timeline-transport">
                            <i class="fas fa-train"></i>
                            <div class="transport-detail">MRT ë ˆë“œë¼ì¸ â†’ ê°€ì˜¤ìŠêµ­ì œê³µí•­ì—­(é«˜é›„åœ‹éš›æ©Ÿå ´ç«™)</div>
                            <div class="transport-time">ğŸ• 25ë¶„ Â· NT$60</div>
                        </div>
                        <div class="timeline-item airport" data-lat="22.5726" data-lng="120.3390">
                            <div class="timeline-time">12:00</div>
                            <div class="timeline-content">
                                <h4>âœˆï¸ ê³µí•­ ë„ì°©</h4>
                                <p>ì²´í¬ì¸ & ì¶œêµ­ì‹¬ì‚¬ & ë©´ì„¸ì  êµ¬ê²½<br>âš ï¸ ì¶œë°œ 2ì‹œê°„ ì „ ë„ì°©!</p>
                            </div>
                        </div>
                        <div class="timeline-item airport" data-lat="22.5726" data-lng="120.3390">
                            <div class="timeline-time">14:05</div>
                            <div class="timeline-content">
                                <h4>ğŸ›« ê°€ì˜¤ìŠ ì¶œë°œ</h4>
                                <p>TW652 ê°€ì˜¤ìŠâ†’ê¹€í¬<br>17:55 ê¹€í¬ ë„ì°© ì˜ˆì •. å†è¦‹ ê°€ì˜¤ìŠ!</p>
                                <span class="tag">ì¶œë°œ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- End page-schedule -->

        <!-- Food Page (Restaurant + Transport) -->
        <div class="page" id="page-food">

            <!-- Tab Navigation -->
            <div class="food-tabs">
                <button class="food-tab active" data-tab="restaurant">ğŸœ ë§›ì§‘</button>
                <button class="food-tab" data-tab="transport">ğŸš‡ êµí†µ</button>
            </div>

        <!-- Restaurant Section -->
        <div class="food-tab-content active" id="tab-restaurant">
        <div class="restaurant-section">
            <div class="restaurant-grid">
                <div class="restaurant-card">
                    <h4>èˆˆéš†å±… (ì‹±ë¡±ì¥)</h4>
                    <div class="cuisine">ì „í†µ ë”¤ì„¬ / ì¡°ì‹</div>
                    <div class="menu">ğŸ¥Ÿ ìƒ¤ì˜¤ë¡±ë°”ì˜¤, ë‹¨ë¹™, ì°ë¹µ</div>
                    <div class="tip">ğŸ’¡ ì•„ì¹¨ ì¼ì° ê°€ë©´ ì¤„ì´ ì§§ì•„ìš”</div>
                    <a href="https://maps.google.com/?q=èˆˆéš†å±…+é«˜é›„" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> ì§€ë„</a>
                </div>
                <div class="restaurant-card">
                    <h4>è€æ±Ÿç´…èŒ¶ç‰›å¥¶</h4>
                    <div class="cuisine">ë°€í¬í‹° ì „ë¬¸ / 1949ë…„~</div>
                    <div class="menu">ğŸ§‹ í™ì°¨ìš°ìœ , í† ìŠ¤íŠ¸</div>
                    <div class="tip">ğŸ’¡ ê°€ì˜¤ìŠ ë°€í¬í‹° ì›ì¡°!</div>
                    <a href="https://maps.google.com/?q=è€æ±Ÿç´…èŒ¶ç‰›å¥¶+é«˜é›„" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> ì§€ë„</a>
                </div>
                <div class="restaurant-card">
                    <h4>æ¥Šå¯¶å¯¶è’¸é¤ƒ</h4>
                    <div class="cuisine">ì°ë§Œë‘ ì „ë¬¸</div>
                    <div class="menu">ğŸ¥Ÿ ì°ë§Œë‘ 10ê°œ + ì™„íƒ•íƒ•</div>
                    <div class="tip">ğŸ’¡ í˜„ì§€ì¸ ì¤„ì„œëŠ” ì°ë§›ì§‘</div>
                    <a href="https://maps.google.com/?q=æ¥Šå¯¶å¯¶è’¸é¤ƒ+é«˜é›„" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> ì§€ë„</a>
                </div>
                <div class="restaurant-card">
                    <h4>é´¨è‚‰ç (ì•¼ë¡œìš°ì  )</h4>
                    <div class="cuisine">ì˜¤ë¦¬ìš”ë¦¬ / 50ë…„ ì „í†µ</div>
                    <div class="menu">ğŸ¦† ì˜¤ë¦¬êµ­ìˆ˜, ì˜¤ë¦¬ë®ë°¥</div>
                    <div class="tip">ğŸ’¡ ì ì‹¬ì‹œê°„ í”¼í¬ í”¼í•˜ê¸°</div>
                    <a href="https://maps.google.com/?q=é´¨è‚‰ç+é«˜é›„" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> ì§€ë„</a>
                </div>
                <div class="restaurant-card">
                    <h4>æ——æ´¥ í•´ì‚°ë¬¼ê±°ë¦¬</h4>
                    <div class="cuisine">í•´ì‚°ë¬¼ / ì¹˜ì§„ì„¬</div>
                    <div class="menu">ğŸ¦ ìƒˆìš°, ì¡°ê°œ, ìƒì„ êµ¬ì´</div>
                    <div class="tip">ğŸ’¡ ê°€ê²© í¥ì • í•„ìˆ˜! í˜„ê¸ˆ ì¤€ë¹„</div>
                    <a href="https://maps.google.com/?q=æ——æ´¥æµ·ç”¢è¡—+é«˜é›„" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> ì§€ë„</a>
                </div>
                <div class="restaurant-card">
                    <h4>åº¦å°æœˆ (ë‘ìƒ¤ì˜¤ì›¨)</h4>
                    <div class="cuisine">ë‹¨ì§œì´ë¯¸ì—” ì›ì¡°</div>
                    <div class="menu">ğŸœ ë‹´ë°±í•œ êµ­ìˆ˜, ë£¨ëŸ¬ìš°íŒ</div>
                    <div class="tip">ğŸ’¡ ëŒ€ë§Œ ì „ì—­ ì²´ì¸ì´ì§€ë§Œ ë§›ìˆìŒ</div>
                    <a href="https://maps.google.com/?q=åº¦å°æœˆ+é«˜é›„" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> ì§€ë„</a>
                </div>
            </div>
        </div>
        </div><!-- End tab-restaurant -->

        <!-- Transportation Section -->
        <div class="food-tab-content" id="tab-transport">
        <div class="transport-section">
            <div class="transport-grid">
                <div class="transport-card recommended">
                    <h4><i class="fas fa-train"></i> MRT (ì§€í•˜ì² )</h4>
                    <div class="price">ğŸ’° 1íšŒê¶Œ NT$20-65 / 1ì¼ê¶Œ NT$180</div>
                    <div class="desc">
                        ê°€ì˜¤ìŠ ì—¬í–‰ì˜ í•µì‹¬ êµí†µìˆ˜ë‹¨!<br>
                        ë ˆë“œë¼ì¸ & ì˜¤ë Œì§€ë¼ì¸ 2ê°œ ë…¸ì„ 
                    </div>
                    <div class="routes">
                        <strong>ì£¼ìš” ì—­:</strong><br>
                        ğŸ”´ ê³µí•­ â†’ ë©”ì´ë¦¬ë‹¤ì˜¤ â†’ ì‹œì¦ˆì™„<br>
                        ğŸŸ  ë©”ì´ë¦¬ë‹¤ì˜¤ â†’ ì—°ì§€ë‹´ â†’ ì‚¼ë´‰ê¶
                    </div>
                    <div class="tip">ğŸ’¡ ì´ì§€ì¹´ë“œ(æ‚ éŠå¡) êµ¬ë§¤ ì¶”ì²œ! í¸ì˜ì ì—ì„œ ì¶©ì „ ê°€ëŠ¥</div>
                </div>

                <div class="transport-card recommended">
                    <h4><i class="fas fa-tram"></i> ê²½ì „ì²  (Light Rail)</h4>
                    <div class="price">ğŸ’° 1íšŒ NT$30 / ì´ì§€ì¹´ë“œ ì‚¬ìš©ê°€ëŠ¥</div>
                    <div class="desc">
                        í•­êµ¬ ì£¼ë³€ ìˆœí™˜ ë…¸ì„ <br>
                        ë³´ì–¼ì˜ˆìˆ íŠ¹êµ¬, ì‹œì¦ˆì™„ êµ¬ê°„ í¸ë¦¬
                    </div>
                    <div class="routes">
                        ğŸšƒ ì‹œì¦ˆì™„ â†” ë³´ì–¼ì˜ˆìˆ íŠ¹êµ¬ â†” í¬ë¥´ëª¨ì‚¬ëŒ€ë¡œ
                    </div>
                    <div class="tip">ğŸ’¡ ë°”ë‹¤ ë³´ë©° ì´ë™, ì•¼ê²½ ì‹œê°„ëŒ€ ì¶”ì²œ!</div>
                </div>

                <div class="transport-card">
                    <h4><i class="fas fa-ship"></i> í˜ë¦¬ (Ferry)</h4>
                    <div class="price">ğŸ’° í¸ë„ NT$40 (ì•½ 1,700ì›)</div>
                    <div class="desc">
                        ì¹˜ì§„ì„¬ ê°€ëŠ” ìœ ì¼í•œ ë°©ë²•!<br>
                        êµ¬ì‚° í˜ë¦¬í„°ë¯¸ë„ â†’ ì¹˜ì§„ì„¬ (10ë¶„)
                    </div>
                    <div class="routes">
                        â›´ï¸ êµ¬ì‚°ì—­ 1ë²ˆì¶œêµ¬ â†’ ë„ë³´ 5ë¶„ â†’ í˜ë¦¬í„°ë¯¸ë„
                    </div>
                    <div class="tip">ğŸ’¡ ì´ì§€ì¹´ë“œë¡œ íƒ‘ìŠ¹ ê°€ëŠ¥, ë°° ì•ˆì—ì„œ ë°”ë‹¤ ì‚¬ì§„ ì°ê¸°!</div>
                </div>

                <div class="transport-card">
                    <h4><i class="fas fa-bicycle"></i> YouBike (ê³µìœ ìì „ê±°)</h4>
                    <div class="price">ğŸ’° 30ë¶„ NT$10 (ì•½ 420ì›)</div>
                    <div class="desc">
                        ì¹˜ì§„ì„¬, ì—°ì§€ë‹´ ì£¼ë³€ ì‚°ì±…ì— ìµœê³ !<br>
                        ì•± ë“±ë¡ í•„ìš” (ì‹ ìš©ì¹´ë“œ)
                    </div>
                    <div class="routes">
                        ğŸš² ì¹˜ì§„ì„¬ ì¼ì£¼ / ì—°ì§€ë‹´ í˜¸ìˆ˜ê¸¸ ì¶”ì²œ
                    </div>
                    <div class="tip">ğŸ’¡ ì¹˜ì§„ì„¬ì€ ìì „ê±°ê°€ ë„ë³´ë³´ë‹¤ í›¨ì”¬ í¸í•¨!</div>
                </div>

                <div class="transport-card">
                    <h4><i class="fas fa-taxi"></i> íƒì‹œ / Uber</h4>
                    <div class="price">ğŸ’° ê¸°ë³¸ NT$85 + ê±°ë¦¬ë‹¹ ì¶”ê°€</div>
                    <div class="desc">
                        ì•¼ê°„/ì§ ë§ì„ ë•Œ ìœ ìš©<br>
                        Uber ì•± ì‚¬ìš© ê°€ëŠ¥
                    </div>
                    <div class="routes">
                        ğŸš• ê³µí•­ â†’ ì‹œë‚´ ì•½ NT$350-400
                    </div>
                    <div class="tip">ğŸ’¡ í˜¸í…”ì—ì„œ íƒì‹œ ë¶ˆëŸ¬ë‹¬ë¼ê³  í•˜ë©´ í¸í•¨</div>
                </div>

                <div class="transport-card">
                    <h4><i class="fas fa-bus"></i> ì‹œë‚´ë²„ìŠ¤</h4>
                    <div class="price">ğŸ’° 1íšŒ NT$12-48</div>
                    <div class="desc">
                        MRT ì•ˆ ë‹¿ëŠ” ê³³ ê°ˆ ë•Œ<br>
                        ë£¨ì´í‘ì•¼ì‹œì¥ ë“±
                    </div>
                    <div class="routes">
                        ğŸšŒ êµ¬ê¸€ë§µìœ¼ë¡œ ë²„ìŠ¤ ë…¸ì„  ê²€ìƒ‰ ì¶”ì²œ
                    </div>
                    <div class="tip">ğŸ’¡ MRTë¡œ ëŒ€ë¶€ë¶„ ì»¤ë²„ ê°€ëŠ¥í•´ì„œ ìì£¼ ì•ˆ ì”€</div>
                </div>
            </div>

            <!-- Recommended Routes -->
            <div class="route-section">
                <h3>ğŸ“ ì¼ì •ë³„ ì¶”ì²œ ì´ë™ ê²½ë¡œ</h3>

                <div class="route-item">
                    <div class="route-from-to">
                        <strong>ê³µí•­ â†’ í˜¸í…” (ë©”ì´ë¦¬ë‹¤ì˜¤ì—­)</strong>
                    </div>
                    <div class="route-method">
                        <i class="fas fa-train"></i> MRT ë ˆë“œë¼ì¸
                    </div>
                    <div class="route-time">â±ï¸ 25ë¶„, NT$60</div>
                </div>

                <div class="route-item">
                    <div class="route-from-to">
                        <strong>ë©”ì´ë¦¬ë‹¤ì˜¤ â†’ ì—°ì§€ë‹´</strong>
                    </div>
                    <div class="route-method">
                        <i class="fas fa-train"></i> MRT ë ˆë“œâ†’ì˜¤ë Œì§€ í™˜ìŠ¹
                    </div>
                    <div class="route-time">â±ï¸ 20ë¶„, NT$35</div>
                </div>

                <div class="route-item">
                    <div class="route-from-to">
                        <strong>ë©”ì´ë¦¬ë‹¤ì˜¤ â†’ ì¹˜ì§„ì„¬</strong>
                    </div>
                    <div class="route-method">
                        <i class="fas fa-train"></i> MRT + <i class="fas fa-ship"></i> í˜ë¦¬
                    </div>
                    <div class="route-time">â±ï¸ 35ë¶„, NT$75</div>
                </div>

                <div class="route-item">
                    <div class="route-from-to">
                        <strong>ì¹˜ì§„ì„¬ â†’ ì‹œì¦ˆì™„</strong>
                    </div>
                    <div class="route-method">
                        <i class="fas fa-ship"></i> í˜ë¦¬ + <i class="fas fa-walking"></i> ë„ë³´
                    </div>
                    <div class="route-time">â±ï¸ 20ë¶„, NT$40</div>
                </div>

                <div class="route-item">
                    <div class="route-from-to">
                        <strong>ì‹œì¦ˆì™„ â†’ ë³´ì–¼ì˜ˆìˆ íŠ¹êµ¬ â†’ í¬ë¥´ëª¨ì‚¬ëŒ€ë¡œ</strong>
                    </div>
                    <div class="route-method">
                        <i class="fas fa-tram"></i> ê²½ì „ì² 
                    </div>
                    <div class="route-time">â±ï¸ 15ë¶„, NT$30</div>
                </div>

                <div class="route-item">
                    <div class="route-from-to">
                        <strong>ë©”ì´ë¦¬ë‹¤ì˜¤ â†’ ë£¨ì´í‘ì•¼ì‹œì¥</strong>
                    </div>
                    <div class="route-method">
                        <i class="fas fa-taxi"></i> íƒì‹œ/Uber
                    </div>
                    <div class="route-time">â±ï¸ 10ë¶„, NT$120</div>
                </div>
            </div>
        </div>
        </div><!-- End tab-transport -->
        </div><!-- End page-food -->

        <!-- Plan B Page -->
        <div class="page" id="page-planb">
            <div class="planb-header">
                <h2>ğŸ”„ í”ŒëœB ëŒ€ì•ˆ</h2>
                <p>í˜„ì¬ ìœ„ì¹˜ì—ì„œ ê° ì¥ì†Œê¹Œì§€ ê±°ë¦¬ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”</p>
            </div>

            <!-- Location Status -->
            <div class="location-status">
                <button id="get-location" class="location-btn">
                    <i class="fas fa-location-arrow"></i> í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
                </button>
                <span id="location-text">ìœ„ì¹˜ ì •ë³´ ì—†ìŒ</span>
            </div>

            <!-- Time Slot Selection -->
            <div class="planb-select-wrapper">
                <select id="planb-time" class="planb-select">
                    <option value="day1-lunch">Day1 ì ì‹¬ (ì‹œì¦ˆì™„/í•˜ë§ˆì‹±)</option>
                    <option value="day1-dinner">Day1 ì €ë… (ë£¨ì´í‘ ì•¼ì‹œì¥)</option>
                    <option value="day2-lunch">Day2 ì ì‹¬ (ì¹˜ì§„ì„¬)</option>
                    <option value="day2-dinner">Day2 ì €ë… (ë³´ì–¼/ì•„ì´í—ˆ)</option>
                    <option value="day3-lunch">Day3 ì ì‹¬ (ì—°ì§€ë‹´)</option>
                </select>
            </div>

            <!-- Plan B List -->
            <div class="planb-list" id="planb-list">
                <!-- Rendered by JavaScript -->
            </div>
        </div><!-- End page-planb -->

        <!-- Checklist Page -->
        <div class="page" id="page-checklist">
        <!-- Packing List -->
        <div class="packing-section" id="packing-section">
            <h2><i class="fas fa-suitcase" style="color: #667eea;"></i> ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
            <div class="packing-grid">
                <div class="packing-category">
                    <h4>ğŸ“„ í•„ìˆ˜ ì„œë¥˜</h4>
                    <ul>
                        <li data-item="passport"><input type="checkbox" id="passport"><label for="passport">ì—¬ê¶Œ (ìœ íš¨ê¸°ê°„ 6ê°œì›”+)</label></li>
                        <li data-item="ticket"><input type="checkbox" id="ticket"><label for="ticket">í•­ê³µê¶Œ (E-ticket)</label></li>
                        <li data-item="hotel"><input type="checkbox" id="hotel"><label for="hotel">í˜¸í…” ì˜ˆì•½ í™•ì¸ì„œ</label></li>
                        <li data-item="insurance"><input type="checkbox" id="insurance"><label for="insurance">ì—¬í–‰ì ë³´í—˜</label></li>
                    </ul>
                </div>
                <div class="packing-category">
                    <h4>ğŸ‘• ì˜ë¥˜</h4>
                    <ul>
                        <li data-item="clothes"><input type="checkbox" id="clothes"><label for="clothes">ë°˜íŒ”/ì–‡ì€ ê¸´íŒ” (23-28Â°C)</label></li>
                        <li data-item="jacket"><input type="checkbox" id="jacket"><label for="jacket">ì–‡ì€ ê²‰ì˜· (ëƒ‰ë°© ëŒ€ë¹„)</label></li>
                        <li data-item="shoes"><input type="checkbox" id="shoes"><label for="shoes">í¸í•œ ìš´ë™í™”</label></li>
                        <li data-item="sunglasses"><input type="checkbox" id="sunglasses"><label for="sunglasses">ì„ ê¸€ë¼ìŠ¤, ëª¨ì</label></li>
                    </ul>
                </div>
                <div class="packing-category">
                    <h4>ğŸ’³ ê¸ˆìœµ</h4>
                    <ul>
                        <li data-item="card"><input type="checkbox" id="card"><label for="card">ì‹ ìš©ì¹´ë“œ (VISA/Master)</label></li>
                        <li data-item="cash"><input type="checkbox" id="cash"><label for="cash">í˜„ê¸ˆ (NT$ í™˜ì „)</label></li>
                        <li data-item="travelwallet"><input type="checkbox" id="travelwallet"><label for="travelwallet">íŠ¸ë˜ë¸”ì›”ë ›/ìœ„ë¹„</label></li>
                    </ul>
                </div>
                <div class="packing-category">
                    <h4>ğŸ“± ê¸°íƒ€</h4>
                    <ul>
                        <li data-item="charger"><input type="checkbox" id="charger"><label for="charger">íœ´ëŒ€í° ì¶©ì „ê¸°</label></li>
                        <li data-item="battery"><input type="checkbox" id="battery"><label for="battery">ë³´ì¡°ë°°í„°ë¦¬</label></li>
                        <li data-item="umbrella"><input type="checkbox" id="umbrella"><label for="umbrella">ìš°ì‚° (ìŠ¤ì½œ ëŒ€ë¹„)</label></li>
                        <li data-item="medicine"><input type="checkbox" id="medicine"><label for="medicine">ìƒë¹„ì•½</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Budget Summary -->
        <div class="budget-summary">
            <h3>ğŸ’° ì˜ˆì‚° ìš”ì•½ (2ì¸ ê¸°ì¤€)</h3>
            <table class="budget-table">
                <tr><td>âœˆï¸ í•­ê³µê¶Œ</td><td>â‚©800,000</td></tr>
                <tr><td>ğŸ¨ ìˆ™ë°• (3ë°•)</td><td>â‚©252,000</td></tr>
                <tr><td>ğŸš‡ êµí†µ</td><td>â‚©42,000</td></tr>
                <tr><td>ğŸœ ì‹ë¹„</td><td>â‚©168,000</td></tr>
                <tr><td>ğŸ« ê´€ê´‘</td><td>â‚©16,800</td></tr>
                <tr><td>ğŸ›ï¸ ì‡¼í•‘</td><td>â‚©126,000</td></tr>
                <tr><td>ğŸ’µ ì˜ˆë¹„ë¹„</td><td>â‚©42,000</td></tr>
                <tr class="total"><td><strong>í•©ê³„</strong></td><td><strong>â‚©1,447,000</strong></td></tr>
            </table>
            <p class="budget-note">1ì¸ë‹¹ ì•½ â‚©723,500 Â· í™˜ìœ¨ 1 TWD â‰ˆ 42 KRW</p>
        </div>
        </div><!-- End page-checklist -->
    </div>

    <!-- Bottom Navigation (Mobile Only) -->
    <nav class="bottom-nav">
        <div class="nav-items">
            <button class="nav-item active" data-page="home">
                <span class="nav-icon">ğŸ </span>
                <span>í™ˆ</span>
            </button>
            <button class="nav-item" data-page="schedule">
                <span class="nav-icon">ğŸ“…</span>
                <span>ì¼ì •</span>
            </button>
            <button class="nav-item" data-page="food">
                <span class="nav-icon">ğŸœ</span>
                <span>ë§›ì§‘</span>
            </button>
            <button class="nav-item" data-page="planb">
                <span class="nav-icon">ğŸ”„</span>
                <span>í”ŒëœB</span>
            </button>
            <button class="nav-item" data-page="checklist">
                <span class="nav-icon">âœ…</span>
                <span>ì²´í¬</span>
            </button>
        </div>
    </nav>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize Map
        const map = L.map('map').setView([22.6273, 120.3014], 12);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Location Data
        const locations = {
            airport: [
                { name: "é«˜é›„åœ‹éš›æ©Ÿå ´ (ê°€ì˜¤ìŠ êµ­ì œê³µí•­)", lat: 22.5726, lng: 120.3390, desc: "âœˆï¸ TW651/TW652 ë„ì°©Â·ì¶œë°œ" },
            ],
            attractions: [
                { name: "è“®æ± æ½­ (ì—°ì§€ë‹´)", lat: 22.6469, lng: 120.2928, desc: "ìš©í˜¸íƒ‘, ì¶˜ì¶”ê°, í˜¸ìˆ˜ ì‚°ì±…" },
                { name: "æ——æ´¥å³¶ (ì¹˜ì§„ì„¬)", lat: 22.6120, lng: 120.2630, desc: "ë“±ëŒ€, í•´ë³€, í•´ì‚°ë¬¼" },
                { name: "è¥¿å­ç£ (ì‹œì¦ˆì™„)", lat: 22.6245, lng: 120.2656, desc: "ì˜êµ­ ì˜ì‚¬ê´€, ì„ì–‘ ëª…ì†Œ" },
                { name: "é§äºŒè—è¡“ç‰¹å€ (ë³´ì–¼ì˜ˆìˆ íŠ¹êµ¬)", lat: 22.6120, lng: 120.2860, desc: "ì˜ˆìˆ  ë‹¨ì§€, ë²½í™” ê±°ë¦¬" },
                { name: "ä¸‰é³³å®® (ì‚¼ë´‰ê¶)", lat: 22.6550, lng: 120.3010, desc: "ëŒ€ë§Œ ìµœëŒ€ ì‚¬ì›" },
            ],
            food: [
                { name: "èˆˆéš†å±… (ì‹±ë¡±ì¥)", lat: 22.6320, lng: 120.2940, desc: "ë”¤ì„¬, ì°ë¹µ" },
                { name: "è€æ±Ÿç´…èŒ¶ç‰›å¥¶", lat: 22.6145, lng: 120.2986, desc: "ë°€í¬í‹° ì›ì¡°" },
                { name: "æ¥Šå¯¶å¯¶è’¸é¤ƒ", lat: 22.6352, lng: 120.2865, desc: "ì°ë§Œë‘ ë§›ì§‘" },
                { name: "é´¨è‚‰ç", lat: 22.6200, lng: 120.2850, desc: "ì˜¤ë¦¬êµ­ìˆ˜" },
            ],
            night: [
                { name: "å…­åˆå¤œå¸‚", lat: 22.6108, lng: 120.2983, desc: "ê´€ê´‘ê° ì•¼ì‹œì¥" },
                { name: "ç‘è±å¤œå¸‚", lat: 22.6700, lng: 120.2860, desc: "í˜„ì§€ì¸ ì•¼ì‹œì¥" },
                { name: "ç¾éº—å³¶ç«™ (ë©”ì´ë¦¬ë‹¤ì˜¤)", lat: 22.6273, lng: 120.3014, desc: "ì„¸ê³„ ìµœê³  ì•„ë¦„ë‹¤ìš´ ì—­" },
            ],
            hotel: [
                { name: "ìˆ™ì†Œ (ì‹œì¦ˆì™„/í•˜ë§ˆì‹± ê·¼ì²˜)", lat: 22.6250, lng: 120.2750, desc: "ğŸ¨ ì²´í¬ì¸ 15:00 / ì²´í¬ì•„ì›ƒ 11:00" },
            ]
        };

        // Custom Icon Function
        function createIcon(type) {
            const colors = {
                airport: '#10b981',
                attraction: '#667eea',
                food: '#f59e0b',
                night: '#ec4899',
                hotel: '#3b82f6'
            };

            const icons = {
                airport: 'âœˆï¸',
                attraction: 'ğŸ“',
                food: 'ğŸœ',
                night: 'ğŸŒ™',
                hotel: 'ğŸ¨'
            };

            const size = type === 'airport' ? 36 : 28;

            return L.divIcon({
                className: 'custom-div-icon',
                html: `<div style="background: ${colors[type]}; color: white; border-radius: 50%; width: ${size}px; height: ${size}px; display: flex; align-items: center; justify-content: center; font-size: ${type === 'airport' ? '16px' : '12px'}; border: 3px solid white; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                    ${icons[type]}
                </div>`,
                iconSize: [size, size],
                iconAnchor: [size/2, size/2]
            });
        }

        // Add Markers
        const markers = [];

        // Airport marker (special)
        locations.airport.forEach(loc => {
            const marker = L.marker([loc.lat, loc.lng], { icon: createIcon('airport') })
                .addTo(map)
                .bindPopup(`<div class="popup-content" style="text-align:center;"><h3 style="color:#10b981;">${loc.name}</h3><p>${loc.desc}</p></div>`);
            markers.push({ marker, ...loc });
        });

        locations.attractions.forEach(loc => {
            const marker = L.marker([loc.lat, loc.lng], { icon: createIcon('attraction') })
                .addTo(map)
                .bindPopup(`<div class="popup-content"><h3>${loc.name}</h3><p>${loc.desc}</p></div>`);
            markers.push({ marker, ...loc });
        });

        locations.food.forEach(loc => {
            const marker = L.marker([loc.lat, loc.lng], { icon: createIcon('food') })
                .addTo(map)
                .bindPopup(`<div class="popup-content food"><h3>${loc.name}</h3><p>${loc.desc}</p></div>`);
            markers.push({ marker, ...loc });
        });

        locations.night.forEach(loc => {
            const marker = L.marker([loc.lat, loc.lng], { icon: createIcon('night') })
                .addTo(map)
                .bindPopup(`<div class="popup-content"><h3>${loc.name}</h3><p>${loc.desc}</p></div>`);
            markers.push({ marker, ...loc });
        });

        locations.hotel.forEach(loc => {
            const marker = L.marker([loc.lat, loc.lng], { icon: createIcon('hotel') })
                .addTo(map)
                .bindPopup(`<div class="popup-content"><h3>${loc.name}</h3><p>${loc.desc}</p></div>`);
            markers.push({ marker, ...loc });
        });

        // Day Tab Switching
        document.querySelectorAll('.day-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active from all tabs
                document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.day-content').forEach(c => c.classList.remove('active'));

                // Add active to clicked tab
                tab.classList.add('active');
                const day = tab.dataset.day;
                document.querySelector(`.day-content[data-day="${day}"]`).classList.add('active');
            });
        });

        // Timeline Item Click - Pan to Location
        document.querySelectorAll('.timeline-item').forEach(item => {
            item.addEventListener('click', () => {
                const lat = parseFloat(item.dataset.lat);
                const lng = parseFloat(item.dataset.lng);
                if (lat && lng) {
                    map.setView([lat, lng], 15);

                    // Find and open corresponding marker popup
                    markers.forEach(m => {
                        if (Math.abs(m.lat - lat) < 0.001 && Math.abs(m.lng - lng) < 0.001) {
                            m.marker.openPopup();
                        }
                    });
                }
            });
        });

        // Packing Checklist - Load & Save to localStorage
        const STORAGE_KEY = 'kaohsiung_packing_checklist';

        // Load saved state
        function loadChecklistState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const checkedItems = JSON.parse(saved);
                checkedItems.forEach(itemId => {
                    const checkbox = document.getElementById(itemId);
                    if (checkbox) {
                        checkbox.checked = true;
                        checkbox.closest('li').classList.add('checked');
                    }
                });
            }
        }

        // Save state
        function saveChecklistState() {
            const checkedItems = [];
            document.querySelectorAll('.packing-category input[type="checkbox"]:checked').forEach(cb => {
                checkedItems.push(cb.id);
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(checkedItems));
        }

        // Add event listeners to all checkboxes
        document.querySelectorAll('.packing-category input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
                const li = e.target.closest('li');
                if (e.target.checked) {
                    li.classList.add('checked');
                } else {
                    li.classList.remove('checked');
                }
                saveChecklistState();
            });
        });

        // Load state on page load
        loadChecklistState();

        // ====================
        // Mobile Page Navigation
        // ====================
        const isMobile = () => window.innerWidth <= 768;

        function switchPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });

            // Show selected page
            const targetPage = document.getElementById('page-' + pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            }

            // Update nav items
            document.querySelectorAll('.nav-item').forEach(n => {
                n.classList.remove('active');
            });
            const activeNav = document.querySelector(`.nav-item[data-page="${pageId}"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            // Scroll to top
            window.scrollTo(0, 0);

            // Reinitialize map if switching to schedule page
            if (pageId === 'schedule') {
                setTimeout(() => {
                    map.invalidateSize();
                }, 100);
            }
        }

        // Nav item click handlers
        document.querySelectorAll('.nav-item').forEach(navItem => {
            navItem.addEventListener('click', () => {
                const pageId = navItem.dataset.page;
                switchPage(pageId);
            });
        });

        // Initialize: show first page on mobile
        function initMobilePages() {
            if (isMobile()) {
                document.querySelectorAll('.page').forEach((p, i) => {
                    if (i === 0) {
                        p.classList.add('active');
                    } else {
                        p.classList.remove('active');
                    }
                });
            } else {
                // On desktop, show all pages
                document.querySelectorAll('.page').forEach(p => {
                    p.classList.add('active');
                });
            }
        }

        // Handle resize - only resize map, don't reset page
        window.addEventListener('resize', () => {
            map.invalidateSize();
        });

        // Initialize on load
        initMobilePages();

        // ====================
        // Food Page Tabs (ë§›ì§‘/êµí†µ)
        // ====================
        document.querySelectorAll('.food-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;

                // Update tab buttons
                document.querySelectorAll('.food-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // Update tab content
                document.querySelectorAll('.food-tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById('tab-' + tabId).classList.add('active');
            });
        });

        // ====================
        // Plan B (ëŒ€ì•ˆ ì¥ì†Œ)
        // ====================
        const planBData = [
            {
                id: 'day1-lunch',
                label: 'Day1 ì ì‹¬',
                area: 'ì‹œì¦ˆì™„/í•˜ë§ˆì‹±',
                original: { name: 'èˆˆéš†å±… (ì‹±ë¡±ì¥)', lat: 22.6320, lng: 120.2940, desc: 'ë”¤ì„¬, ìƒ¤ì˜¤ë¡±ë°”ì˜¤' },
                alternatives: [
                    { name: 'è€æ±Ÿç´…èŒ¶ç‰›å¥¶', lat: 22.6145, lng: 120.2986, desc: 'ë°€í¬í‹° ì›ì¡°, 1949ë…„~' },
                    { name: 'æ¥Šå¯¶å¯¶è’¸é¤ƒ', lat: 22.6352, lng: 120.2865, desc: 'í˜„ì§€ì¸ ì°ë§Œë‘ ë§›ì§‘' },
                    { name: 'é´¨è‚‰ç (ì•¼ë¡œìš°ì  )', lat: 22.6200, lng: 120.2850, desc: 'ì˜¤ë¦¬êµ­ìˆ˜, 50ë…„ ì „í†µ' },
                    { name: 'æ¸¯åœ’ç‰›è‚‰éºµ', lat: 22.6280, lng: 120.2900, desc: 'ìš°ìœ¡ë©´, 60ë…„ ì „í†µ' }
                ]
            },
            {
                id: 'day1-dinner',
                label: 'Day1 ì €ë…',
                area: 'ì•¼ì‹œì¥',
                original: { name: 'ç‘è±å¤œå¸‚ (ë£¨ì´í‘)', lat: 22.6700, lng: 120.2860, desc: 'í˜„ì§€ì¸ ì•¼ì‹œì¥, ì €ë ´í•¨' },
                alternatives: [
                    { name: 'å…­åˆå¤œå¸‚ (ë¦¬ìš°í—ˆ)', lat: 22.6108, lng: 120.2983, desc: 'ê´€ê´‘ê° ì•¼ì‹œì¥, MRT ì ‘ê·¼ í¸ë¦¬' },
                    { name: 'å—è¯è§€å…‰å¤œå¸‚', lat: 22.6280, lng: 120.2950, desc: 'ë¡œì»¬ ì•¼ì‹œì¥' }
                ]
            },
            {
                id: 'day2-lunch',
                label: 'Day2 ì ì‹¬',
                area: 'ì¹˜ì§„ì„¬',
                original: { name: 'æ——æ´¥æµ·ç”¢è¡—', lat: 22.6115, lng: 120.2650, desc: 'í•´ì‚°ë¬¼ ê±°ë¦¬' },
                alternatives: [
                    { name: 'æ——åæ´»æµ·ç”¢åº—', lat: 22.5850, lng: 120.2650, desc: '40ë…„ ë…¸í¬, ì‹ ì„  í•´ì‚°ë¬¼' },
                    { name: 'æµ·ä¹‹å†° (í•˜ì´ì¦ˆë¹™)', lat: 22.6245, lng: 120.2640, desc: 'ëŒ€ì™• ë¹™ìˆ˜ ì›ì¡°' }
                ]
            },
            {
                id: 'day2-dinner',
                label: 'Day2 ì €ë…',
                area: 'ë³´ì–¼/ì•„ì´í—ˆ',
                original: { name: 'æ„›æ²³ (ì•„ì´í—ˆ)', lat: 22.6085, lng: 120.2865, desc: 'ì•¼ê²½, ì‚°ì±…' },
                alternatives: [
                    { name: 'é§äºŒè—è¡“ç‰¹å€', lat: 22.6120, lng: 120.2860, desc: 'ì˜ˆìˆ ë‹¨ì§€, ì¹´í˜ ê±°ë¦¬' },
                    { name: 'é¹½åŸ•åŸ” ê³¨ëª©', lat: 22.6200, lng: 120.2800, desc: 'ë¡œì»¬ ë§›ì§‘ ê³¨ëª©' }
                ]
            },
            {
                id: 'day3-lunch',
                label: 'Day3 ì ì‹¬',
                area: 'ì—°ì§€ë‹´',
                original: { name: 'è“®æ± æ½­ ì£¼ë³€', lat: 22.6469, lng: 120.2928, desc: 'ìš©í˜¸íƒ‘ ê·¼ì²˜' },
                alternatives: [
                    { name: 'ä¸‰ç‰›ç‰›è‚‰éºµ', lat: 22.6450, lng: 120.2950, desc: 'ì—°ì§€ë‹´ ê·¼ì²˜ ìš°ìœ¡ë©´' },
                    { name: 'å·¦ç‡ŸèˆŠåŸ ë§›ì§‘ê³¨ëª©', lat: 22.6500, lng: 120.2900, desc: 'ì „í†µì‹œì¥ ë¨¹ê±°ë¦¬' }
                ]
            }
        ];

        let currentLat = null;
        let currentLng = null;

        // Haversine ê±°ë¦¬ ê³„ì‚° (km)
        function getDistance(lat1, lng1, lat2, lng2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
        document.getElementById('get-location').addEventListener('click', function() {
            const btn = this;
            const text = document.getElementById('location-text');

            btn.classList.add('loading');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ê°€ì ¸ì˜¤ëŠ” ì¤‘...';

            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    currentLat = pos.coords.latitude;
                    currentLng = pos.coords.longitude;
                    text.textContent = `ğŸ“ ${currentLat.toFixed(4)}, ${currentLng.toFixed(4)}`;
                    text.classList.add('success');
                    btn.classList.remove('loading');
                    btn.innerHTML = '<i class="fas fa-location-arrow"></i> ìœ„ì¹˜ ê°±ì‹ ';
                    renderPlanB();
                },
                (err) => {
                    text.textContent = 'âš ï¸ ìœ„ì¹˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤';
                    btn.classList.remove('loading');
                    btn.innerHTML = '<i class="fas fa-location-arrow"></i> ë‹¤ì‹œ ì‹œë„';
                }
            );
        });

        // í”ŒëœB ëª©ë¡ ë Œë”ë§
        function renderPlanB() {
            const timeId = document.getElementById('planb-time').value;
            const data = planBData.find(d => d.id === timeId);
            if (!data) return;

            const allPlaces = [
                { ...data.original, isOriginal: true },
                ...data.alternatives.map(a => ({ ...a, isOriginal: false }))
            ];

            // ê±°ë¦¬ ê³„ì‚°
            if (currentLat && currentLng) {
                allPlaces.forEach(p => {
                    p.distance = getDistance(currentLat, currentLng, p.lat, p.lng);
                });
                allPlaces.sort((a, b) => a.distance - b.distance);
            }

            // ë Œë”ë§
            const list = document.getElementById('planb-list');
            list.innerHTML = allPlaces.map(p => {
                const distText = p.distance ? `${p.distance.toFixed(1)}km` : 'ê±°ë¦¬ ì¸¡ì • í•„ìš”';
                const distClass = p.distance ? '' : 'unknown';
                const cardClass = p.isOriginal ? 'original' : '';
                const namePrefix = p.isOriginal ? 'ğŸ¯ ' : '';
                const mapUrl = `https://maps.google.com/?q=${p.lat},${p.lng}`;

                return `
                    <div class="planb-card ${cardClass}">
                        <div class="planb-card-info">
                            <div class="planb-name">${namePrefix}${p.name}</div>
                            <div class="planb-desc">${p.desc}</div>
                        </div>
                        <div class="planb-card-right">
                            <div class="planb-distance ${distClass}">${distText}</div>
                            <a href="${mapUrl}" target="_blank" class="planb-map-btn">ì§€ë„</a>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ì‹œì  ë³€ê²½ ì‹œ ë‹¤ì‹œ ë Œë”ë§
        document.getElementById('planb-time').addEventListener('change', renderPlanB);

        // ì´ˆê¸° ë Œë”ë§
        renderPlanB();
    </script>
</body>
</html>
